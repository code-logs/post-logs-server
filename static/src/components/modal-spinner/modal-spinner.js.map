{"version":3,"file":"modal-spinner.js","sourceRoot":"","sources":["../../../../src/components/modal-spinner/modal-spinner.ts"],"names":[],"mappings":";AAAA,OAAO,EAAE,GAAG,EAAE,IAAI,EAAE,UAAU,EAAE,MAAM,KAAK,CAAA;AAC3C,OAAO,EAAE,aAAa,EAAE,QAAQ,EAAE,MAAM,mBAAmB,CAAA;AAG3D,IAAa,YAAY,GAAzB,MAAa,YAAa,SAAQ,UAAU;IAA5C;;QAEE,cAAS,GAAY,KAAK,CAAA;QAiClB,wBAAmB,GAAG,GAAG,EAAE;YACjC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,QAAQ,CAAA;YACvC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAA;YACrB,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,GAAG,GAAG,CAAA;QAChC,CAAC,CAAA;QAEO,uBAAkB,GAAG,GAAG,EAAE;YAChC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,MAAM,CAAA;YACrC,IAAI,CAAC,SAAS,GAAG,KAAK,CAAA;YACtB,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,GAAG,GAAG,CAAA;QAChC,CAAC,CAAA;IA0BH,CAAC;IAxBC,IAAY,KAAK;QACf,MAAM,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,aAAa,CAAc,QAAQ,CAAC,CAAA;QAClE,IAAI,CAAC,KAAK;YAAE,MAAM,IAAI,KAAK,CAAC,sBAAsB,CAAC,CAAA;QAEnD,OAAO,KAAK,CAAA;IACd,CAAC;IAED,iBAAiB;;QACf,MAAA,KAAK,CAAC,iBAAiB,oDAAI,CAAA;QAC3B,MAAM,CAAC,gBAAgB,CAAC,cAAc,EAAE,IAAI,CAAC,mBAAmB,CAAC,CAAA;QACjE,MAAM,CAAC,gBAAgB,CAAC,aAAa,EAAE,IAAI,CAAC,kBAAkB,CAAC,CAAA;IACjE,CAAC;IAED,oBAAoB;;QAClB,MAAA,KAAK,CAAC,oBAAoB,oDAAI,CAAA;QAC9B,MAAM,CAAC,mBAAmB,CAAC,cAAc,EAAE,IAAI,CAAC,mBAAmB,CAAC,CAAA;QACpE,MAAM,CAAC,mBAAmB,CAAC,aAAa,EAAE,IAAI,CAAC,kBAAkB,CAAC,CAAA;IACpE,CAAC;IAED,MAAM;QACJ,OAAO,IAAI,CAAA,6BAA6B,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,EAAE;;eAE/D,CAAA;IACb,CAAC;CACF,CAAA;AAnEQ,mBAAM,GAAG,GAAG,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GA6BlB,CAAA;AA/BD;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC;+CACF;AAFf,YAAY;IADxB,aAAa,CAAC,eAAe,CAAC;GAClB,YAAY,CAuExB;SAvEY,YAAY","sourcesContent":["import { css, html, LitElement } from 'lit'\nimport { customElement, property } from 'lit/decorators.js'\n\n@customElement('modal-spinner')\nexport class ModalSpinner extends LitElement {\n  @property({ type: Boolean })\n  isLoading: boolean = false\n\n  static styles = css`\n    #modal {\n      position: fixed;\n      left: 0;\n      right: 0;\n      top: 0;\n      bottom: 0;\n      height: 100vh;\n      background-color: rgba(0, 0, 0, 0.5);\n      z-index: 1;\n      transition: opacity 0.3s ease-in-out 0s;\n      pointer-events: none;\n      opacity: 0;\n    }\n    #modal.is-loading {\n      transition: opacity 0.5s ease-in-out 0s;\n      pointer-events: auto;\n      opacity: 1;\n    }\n    #message {\n      position: absolute;\n      left: 50%;\n      top: 30%;\n      transform: translate(-50%, -50%);\n      font-weight: 700;\n      font-size: 1.2rem;\n      text-shadow: -1px -1px 0 #fff, 1px -1px 0 #fff, -1px 1px 0 #fff,\n        1px 1px 0 #fff;\n    }\n  `\n\n  private loadingStartHandler = () => {\n    document.body.style.overflow = 'hidden'\n    this.isLoading = true\n    this.modal.style.opacity = '1'\n  }\n\n  private loadingStopHandler = () => {\n    document.body.style.overflow = 'auto'\n    this.isLoading = false\n    this.modal.style.opacity = '0'\n  }\n\n  private get modal() {\n    const modal = this.renderRoot.querySelector<HTMLElement>('#modal')\n    if (!modal) throw new Error('Failed to find modal')\n\n    return modal\n  }\n\n  connectedCallback() {\n    super.connectedCallback?.()\n    window.addEventListener('loadingStart', this.loadingStartHandler)\n    window.addEventListener('loadingStop', this.loadingStopHandler)\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback?.()\n    window.removeEventListener('loadingStart', this.loadingStartHandler)\n    window.removeEventListener('loadingStop', this.loadingStopHandler)\n  }\n\n  render() {\n    return html`<section id=\"modal\" class=${this.isLoading ? 'is-loading' : ''}>\n      <p id=\"message\">Now Loading...</p>\n    </section>`\n  }\n}\n"]}